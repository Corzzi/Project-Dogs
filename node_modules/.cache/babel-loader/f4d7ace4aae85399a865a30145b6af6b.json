{"ast":null,"code":"import _objectSpread from\"C:/Users/gabri/Desktop/dogs-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/gabri/Desktop/dogs-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useNavigate}from\"react-router-dom\";import{POST_PHOTO}from\"../../api\";import Error from\"../../Helper/Error\";import Head from\"../../Helper/Head\";import useFetch from\"../../Hooks/useFetch\";import useForm from\"../../Hooks/useForm\";import Button from\"../Form/Button\";import Input from\"../Form/Input\";import styles from\"./UserPostPhoto.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserPostPhoto=function UserPostPhoto(){var name=useForm();var weight=useForm(\"number\");var age=useForm(\"number\");var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),img=_React$useState2[0],setImg=_React$useState2[1];var _useFetch=useFetch(),data=_useFetch.data,loading=_useFetch.loading,error=_useFetch.error,request=_useFetch.request;var navigate=useNavigate();React.useEffect(function(){if(data)navigate(\"/my-account\");},[data,navigate]);function handleSubmit(event){event.preventDefault();var formData=new FormData();formData.append(\"img\",img.raw);formData.append(\"nome\",name.value);formData.append(\"peso\",weight.value);formData.append(\"idade\",age.value);var token=window.localStorage.getItem(\"token\");var _POST_PHOTO=POST_PHOTO(formData,token),url=_POST_PHOTO.url,options=_POST_PHOTO.options;request(url,options);}function handleImgChange(_ref){var target=_ref.target;setImg({preview:URL.createObjectURL(target.files[0]),raw:target.files[0]});}return/*#__PURE__*/_jsxs(\"section\",{className:\"\".concat(styles.postPhoto,\" animeLeft\"),children:[/*#__PURE__*/_jsx(Head,{title:\"Poste sua foto\",description:\"P\\xE1gina de postagem de fotos\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Input,_objectSpread({label:\"Nome\",type:\"text\",name:\"name\"},name)),/*#__PURE__*/_jsx(Input,_objectSpread({label:\"Peso\",type:\"number\",name:\"weight\"},weight)),/*#__PURE__*/_jsx(Input,_objectSpread({label:\"Idade\",type:\"number\",name:\"age\"},age)),/*#__PURE__*/_jsx(\"input\",{className:styles.file,type:\"file\",name:\"img\",id:\"img\",onChange:handleImgChange}),loading?/*#__PURE__*/_jsx(Button,{disabled:true,children:\"Enviando...\"}):/*#__PURE__*/_jsx(Button,{children:\"Enviar\"}),/*#__PURE__*/_jsx(Error,{error:error})]}),/*#__PURE__*/_jsx(\"div\",{children:img.preview&&/*#__PURE__*/_jsx(\"div\",{className:styles.preview,style:{backgroundImage:\"url('\".concat(img.preview,\"')\")}})})]});};export default UserPostPhoto;","map":{"version":3,"names":["React","useNavigate","POST_PHOTO","Error","Head","useFetch","useForm","Button","Input","styles","UserPostPhoto","name","weight","age","useState","img","setImg","data","loading","error","request","navigate","useEffect","handleSubmit","event","preventDefault","formData","FormData","append","raw","value","token","window","localStorage","getItem","url","options","handleImgChange","target","preview","URL","createObjectURL","files","postPhoto","file","backgroundImage"],"sources":["C:/Users/gabri/Desktop/dogs-project/src/Components/User/UserPostPhoto.js"],"sourcesContent":["import React from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { POST_PHOTO } from \"../../api\";\r\nimport Error from \"../../Helper/Error\";\r\nimport Head from \"../../Helper/Head\";\r\nimport useFetch from \"../../Hooks/useFetch\";\r\nimport useForm from \"../../Hooks/useForm\";\r\nimport Button from \"../Form/Button\";\r\nimport Input from \"../Form/Input\";\r\nimport styles from \"./UserPostPhoto.module.css\";\r\n\r\nconst UserPostPhoto = () => {\r\n  const name = useForm();\r\n  const weight = useForm(\"number\");\r\n  const age = useForm(\"number\");\r\n  const [img, setImg] = React.useState({});\r\n  const { data, loading, error, request } = useFetch();\r\n  const navigate = useNavigate();\r\n\r\n  React.useEffect(() => {\r\n    if (data) navigate(\"/my-account\");\r\n  }, [data, navigate]);\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append(\"img\", img.raw);\r\n    formData.append(\"nome\", name.value);\r\n    formData.append(\"peso\", weight.value);\r\n    formData.append(\"idade\", age.value);\r\n\r\n    const token = window.localStorage.getItem(\"token\");\r\n    const { url, options } = POST_PHOTO(formData, token);\r\n    request(url, options);\r\n  }\r\n\r\n  function handleImgChange({ target }) {\r\n    setImg({\r\n      preview: URL.createObjectURL(target.files[0]),\r\n      raw: target.files[0],\r\n    });\r\n  }\r\n\r\n  return (\r\n    <section className={`${styles.postPhoto} animeLeft`}>\r\n      <Head\r\n        title=\"Poste sua foto\"\r\n        description={`PÃ¡gina de postagem de fotos`}\r\n      />\r\n      <form onSubmit={handleSubmit}>\r\n        <Input label=\"Nome\" type=\"text\" name=\"name\" {...name} />\r\n        <Input label=\"Peso\" type=\"number\" name=\"weight\" {...weight} />\r\n        <Input label=\"Idade\" type=\"number\" name=\"age\" {...age} />\r\n        <input\r\n          className={styles.file}\r\n          type=\"file\"\r\n          name=\"img\"\r\n          id=\"img\"\r\n          onChange={handleImgChange}\r\n        />\r\n        {loading ? (\r\n          <Button disabled>Enviando...</Button>\r\n        ) : (\r\n          <Button>Enviar</Button>\r\n        )}\r\n        <Error error={error} />\r\n      </form>\r\n      <div>\r\n        {img.preview && (\r\n          <div\r\n            className={styles.preview}\r\n            style={{ backgroundImage: `url('${img.preview}')` }}\r\n          ></div>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default UserPostPhoto;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}