{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/gabri/Desktop/dogs-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/gabri/Desktop/dogs-project/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/gabri/Desktop/dogs-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/gabri/Desktop/dogs-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{POST_COMMENT}from\"../../api\";import useFetch from\"../../Hooks/useFetch\";import styles from\"./PhotoCommentsForm.module.css\";import{ReactComponent as Send}from\"../../Assets/enviar.svg\";import Error from\"../../Helper/Error\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PhotoCommentsForm=function PhotoCommentsForm(_ref){var id=_ref.id,setComments=_ref.setComments,single=_ref.single;var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),comment=_React$useState2[0],setComment=_React$useState2[1];var _useFetch=useFetch(),request=_useFetch.request,error=_useFetch.error;function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var token,_POST_COMMENT,url,options,_yield$request,response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();token=window.localStorage.getItem(\"token\");_POST_COMMENT=POST_COMMENT(id,token,{comment:comment}),url=_POST_COMMENT.url,options=_POST_COMMENT.options;_context.next=5;return request(url,options);case 5:_yield$request=_context.sent;response=_yield$request.response;json=_yield$request.json;if(response.ok){setComment(\"\");setComments(function(comments){return[].concat(_toConsumableArray(comments),[json]);});}case 9:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"form\",{className:\"\".concat(styles.form,\" \").concat(single?styles.single:\"\"),onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{opacity:0},children:\"Comente aqui\"}),/*#__PURE__*/_jsx(\"textarea\",{className:styles.textarea,id:\"comment\",name:\"comment\",value:comment,onChange:function onChange(_ref2){var target=_ref2.target;return setComment(target.value);},placeholder:\"Comente aqui...\"})]}),/*#__PURE__*/_jsx(\"button\",{className:styles.button,children:/*#__PURE__*/_jsx(Send,{})}),/*#__PURE__*/_jsx(Error,{error:error})]});};export default PhotoCommentsForm;","map":{"version":3,"names":["React","POST_COMMENT","useFetch","styles","ReactComponent","Send","Error","PhotoCommentsForm","id","setComments","single","useState","comment","setComment","request","error","handleSubmit","event","preventDefault","token","window","localStorage","getItem","url","options","response","json","ok","comments","form","opacity","textarea","target","value","button"],"sources":["C:/Users/gabri/Desktop/dogs-project/src/Components/Photo/PhotoCommentsForm.js"],"sourcesContent":["import React from \"react\";\r\nimport { POST_COMMENT } from \"../../api\";\r\nimport useFetch from \"../../Hooks/useFetch\";\r\nimport styles from \"./PhotoCommentsForm.module.css\";\r\nimport { ReactComponent as Send } from \"../../Assets/enviar.svg\";\r\nimport Error from \"../../Helper/Error\";\r\n\r\nconst PhotoCommentsForm = ({ id, setComments, single }) => {\r\n  const [comment, setComment] = React.useState(\"\");\r\n  const { request, error } = useFetch();\r\n\r\n  async function handleSubmit(event) {\r\n    event.preventDefault();\r\n    const token = window.localStorage.getItem(\"token\");\r\n    const { url, options } = POST_COMMENT(id, token, { comment });\r\n    const { response, json } = await request(url, options);\r\n    if (response.ok) {\r\n      setComment(\"\");\r\n      setComments((comments) => [...comments, json]);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form\r\n      className={`${styles.form} ${single ? styles.single : \"\"}`}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <label>\r\n        <span style={{ opacity: 0 }}>Comente aqui</span>\r\n        <textarea\r\n          className={styles.textarea}\r\n          id=\"comment\"\r\n          name=\"comment\"\r\n          value={comment}\r\n          onChange={({ target }) => setComment(target.value)}\r\n          placeholder=\"Comente aqui...\"\r\n        />\r\n      </label>\r\n      <button className={styles.button}>\r\n        <Send />\r\n      </button>\r\n      <Error error={error} />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PhotoCommentsForm;\r\n"],"mappings":"4fAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,YAAT,KAA6B,WAA7B,CACA,MAAOC,SAAP,KAAqB,sBAArB,CACA,MAAOC,OAAP,KAAmB,gCAAnB,CACA,OAASC,cAAc,GAAIC,KAA3B,KAAuC,yBAAvC,CACA,MAAOC,MAAP,KAAkB,oBAAlB,C,wFAEA,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,MAAiC,IAA9BC,GAA8B,MAA9BA,EAA8B,CAA1BC,WAA0B,MAA1BA,WAA0B,CAAbC,MAAa,MAAbA,MAAa,CACzD,oBAA8BV,KAAK,CAACW,QAAN,CAAe,EAAf,CAA9B,oDAAOC,OAAP,qBAAgBC,UAAhB,qBACA,cAA2BX,QAAQ,EAAnC,CAAQY,OAAR,WAAQA,OAAR,CAAiBC,KAAjB,WAAiBA,KAAjB,CAFyD,QAI1CC,aAJ0C,kJAIzD,iBAA4BC,KAA5B,qLACEA,KAAK,CAACC,cAAN,GACMC,KAFR,CAEgBC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAFhB,eAG2BrB,YAAY,CAACO,EAAD,CAAKW,KAAL,CAAY,CAAEP,OAAO,CAAPA,OAAF,CAAZ,CAHvC,CAGUW,GAHV,eAGUA,GAHV,CAGeC,OAHf,eAGeA,OAHf,uBAImCV,QAAO,CAACS,GAAD,CAAMC,OAAN,CAJ1C,qCAIUC,QAJV,gBAIUA,QAJV,CAIoBC,IAJpB,gBAIoBA,IAJpB,CAKE,GAAID,QAAQ,CAACE,EAAb,CAAiB,CACfd,UAAU,CAAC,EAAD,CAAV,CACAJ,WAAW,CAAC,SAACmB,QAAD,qCAAkBA,QAAlB,GAA4BF,IAA5B,IAAD,CAAX,CACD,CARH,sDAJyD,+CAezD,mBACE,cACE,SAAS,WAAKvB,MAAM,CAAC0B,IAAZ,aAAoBnB,MAAM,CAAGP,MAAM,CAACO,MAAV,CAAmB,EAA7C,CADX,CAEE,QAAQ,CAAEM,YAFZ,wBAIE,sCACE,aAAM,KAAK,CAAE,CAAEc,OAAO,CAAE,CAAX,CAAb,0BADF,cAEE,iBACE,SAAS,CAAE3B,MAAM,CAAC4B,QADpB,CAEE,EAAE,CAAC,SAFL,CAGE,IAAI,CAAC,SAHP,CAIE,KAAK,CAAEnB,OAJT,CAKE,QAAQ,CAAE,4BAAGoB,OAAH,OAAGA,MAAH,OAAgBnB,WAAU,CAACmB,MAAM,CAACC,KAAR,CAA1B,EALZ,CAME,WAAW,CAAC,iBANd,EAFF,GAJF,cAeE,eAAQ,SAAS,CAAE9B,MAAM,CAAC+B,MAA1B,uBACE,KAAC,IAAD,IADF,EAfF,cAkBE,KAAC,KAAD,EAAO,KAAK,CAAEnB,KAAd,EAlBF,GADF,CAsBD,CArCD,CAuCA,cAAeR,kBAAf"},"metadata":{},"sourceType":"module"}