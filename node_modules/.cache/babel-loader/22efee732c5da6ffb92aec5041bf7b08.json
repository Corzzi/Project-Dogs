{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/gabri/Desktop/dogs-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/gabri/Desktop/dogs-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/gabri/Desktop/dogs-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/gabri/Desktop/dogs-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useNavigate}from\"react-router-dom\";import{RESET_PASSWORD}from\"../../api\";import Error from\"../../Helper/Error\";import Head from\"../../Helper/Head\";import useFetch from\"../../Hooks/useFetch\";import useForm from\"../../Hooks/useForm\";import Button from\"../Form/Button\";import Input from\"../Form/Input\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginReset=function LoginReset(){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),login=_React$useState2[0],setLogin=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),key=_React$useState4[0],setKey=_React$useState4[1];var password=useForm(\"password\");var _useFetch=useFetch(),loading=_useFetch.loading,error=_useFetch.error,request=_useFetch.request;var navigate=useNavigate();React.useEffect(function(){var params=new URLSearchParams(window.location.search);var key=params.get(\"key\");var login=params.get(\"login\");if(key)setKey(key);if(login)setLogin(login);},[]);function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _RESET_PASSWORD,url,options,_yield$request,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(!password.validate()){_context.next=8;break;}_RESET_PASSWORD=RESET_PASSWORD({login:login,key:key,password:password.value}),url=_RESET_PASSWORD.url,options=_RESET_PASSWORD.options;_context.next=5;return request(url,options);case 5:_yield$request=_context.sent;response=_yield$request.response;if(response.ok)navigate(\"/Dogs-Projeto/login\");case 8:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"section\",{className:\"animeLeft\",children:[/*#__PURE__*/_jsx(Head,{title:\"Resetar senha\",description:\"P\\xE1gina para resetar senha\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Resete a senha\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Input,_objectSpread({label:\"Nova senha\",type:\"password\",name:\"password\"},password)),loading?/*#__PURE__*/_jsx(Button,{disabled:true,children:\"Resetando...\"}):/*#__PURE__*/_jsx(Button,{children:\"Resetar\"})]}),/*#__PURE__*/_jsx(Error,{error:error})]});};export default LoginReset;","map":{"version":3,"names":["React","useNavigate","RESET_PASSWORD","Error","Head","useFetch","useForm","Button","Input","LoginReset","useState","login","setLogin","key","setKey","password","loading","error","request","navigate","useEffect","params","URLSearchParams","window","location","search","get","handleSubmit","event","preventDefault","validate","value","url","options","response","ok"],"sources":["C:/Users/gabri/Desktop/dogs-project/src/Components/Login/LoginReset.js"],"sourcesContent":["import React from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { RESET_PASSWORD } from \"../../api\";\r\nimport Error from \"../../Helper/Error\";\r\nimport Head from \"../../Helper/Head\";\r\nimport useFetch from \"../../Hooks/useFetch\";\r\nimport useForm from \"../../Hooks/useForm\";\r\nimport Button from \"../Form/Button\";\r\nimport Input from \"../Form/Input\";\r\n\r\nconst LoginReset = () => {\r\n  const [login, setLogin] = React.useState(\"\");\r\n  const [key, setKey] = React.useState(\"\");\r\n  const password = useForm(\"password\");\r\n  const { loading, error, request } = useFetch();\r\n  const navigate = useNavigate();\r\n\r\n  React.useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const key = params.get(\"key\");\r\n    const login = params.get(\"login\");\r\n    if (key) setKey(key);\r\n    if (login) setLogin(login);\r\n  }, []);\r\n\r\n  async function handleSubmit(event) {\r\n    event.preventDefault();\r\n    if (password.validate()) {\r\n      const { url, options } = RESET_PASSWORD({\r\n        login,\r\n        key,\r\n        password: password.value,\r\n      });\r\n      const { response } = await request(url, options);\r\n      if (response.ok) navigate(\"/Dogs-Projeto/login\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section className=\"animeLeft\">\r\n      <Head title=\"Resetar senha\" description={`PÃ¡gina para resetar senha`} />\r\n      <h1 className=\"title\">Resete a senha</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <Input\r\n          label=\"Nova senha\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          {...password}\r\n        />\r\n        {loading ? (\r\n          <Button disabled>Resetando...</Button>\r\n        ) : (\r\n          <Button>Resetar</Button>\r\n        )}\r\n      </form>\r\n      <Error error={error} />\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default LoginReset;\r\n"],"mappings":"mfAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,cAAT,KAA+B,WAA/B,CACA,MAAOC,MAAP,KAAkB,oBAAlB,CACA,MAAOC,KAAP,KAAiB,mBAAjB,CACA,MAAOC,SAAP,KAAqB,sBAArB,CACA,MAAOC,QAAP,KAAoB,qBAApB,CACA,MAAOC,OAAP,KAAmB,gBAAnB,CACA,MAAOC,MAAP,KAAkB,eAAlB,C,wFAEA,GAAMC,WAAU,CAAG,QAAbA,WAAa,EAAM,CACvB,oBAA0BT,KAAK,CAACU,QAAN,CAAe,EAAf,CAA1B,oDAAOC,KAAP,qBAAcC,QAAd,qBACA,qBAAsBZ,KAAK,CAACU,QAAN,CAAe,EAAf,CAAtB,qDAAOG,GAAP,qBAAYC,MAAZ,qBACA,GAAMC,SAAQ,CAAGT,OAAO,CAAC,UAAD,CAAxB,CACA,cAAoCD,QAAQ,EAA5C,CAAQW,OAAR,WAAQA,OAAR,CAAiBC,KAAjB,WAAiBA,KAAjB,CAAwBC,OAAxB,WAAwBA,OAAxB,CACA,GAAMC,SAAQ,CAAGlB,WAAW,EAA5B,CAEAD,KAAK,CAACoB,SAAN,CAAgB,UAAM,CACpB,GAAMC,OAAM,CAAG,GAAIC,gBAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,CAAf,CACA,GAAMZ,IAAG,CAAGQ,MAAM,CAACK,GAAP,CAAW,KAAX,CAAZ,CACA,GAAMf,MAAK,CAAGU,MAAM,CAACK,GAAP,CAAW,OAAX,CAAd,CACA,GAAIb,GAAJ,CAASC,MAAM,CAACD,GAAD,CAAN,CACT,GAAIF,KAAJ,CAAWC,QAAQ,CAACD,KAAD,CAAR,CACZ,CAND,CAMG,EANH,EAPuB,QAeRgB,aAfQ,kJAevB,iBAA4BC,KAA5B,4KACEA,KAAK,CAACC,cAAN,GADF,IAEMd,QAAQ,CAACe,QAAT,EAFN,yCAG6B5B,cAAc,CAAC,CACtCS,KAAK,CAALA,KADsC,CAEtCE,GAAG,CAAHA,GAFsC,CAGtCE,QAAQ,CAAEA,QAAQ,CAACgB,KAHmB,CAAD,CAH3C,CAGYC,GAHZ,iBAGYA,GAHZ,CAGiBC,OAHjB,iBAGiBA,OAHjB,uBAQ+Bf,QAAO,CAACc,GAAD,CAAMC,OAAN,CARtC,qCAQYC,QARZ,gBAQYA,QARZ,CASI,GAAIA,QAAQ,CAACC,EAAb,CAAiBhB,QAAQ,CAAC,qBAAD,CAAR,CATrB,sDAfuB,+CA4BvB,mBACE,iBAAS,SAAS,CAAC,WAAnB,wBACE,KAAC,IAAD,EAAM,KAAK,CAAC,eAAZ,CAA4B,WAAW,+BAAvC,EADF,cAEE,WAAI,SAAS,CAAC,OAAd,4BAFF,cAGE,cAAM,QAAQ,CAAEQ,YAAhB,wBACE,KAAC,KAAD,gBACE,KAAK,CAAC,YADR,CAEE,IAAI,CAAC,UAFP,CAGE,IAAI,CAAC,UAHP,EAIMZ,QAJN,EADF,CAOGC,OAAO,cACN,KAAC,MAAD,EAAQ,QAAQ,KAAhB,0BADM,cAGN,KAAC,MAAD,sBAVJ,GAHF,cAgBE,KAAC,KAAD,EAAO,KAAK,CAAEC,KAAd,EAhBF,GADF,CAoBD,CAhDD,CAkDA,cAAeR,WAAf"},"metadata":{},"sourceType":"module"}