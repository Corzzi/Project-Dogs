{"ast":null,"code":"import _toConsumableArray from\"C:/Users/gabri/Desktop/dogs-project/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/gabri/Desktop/dogs-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import FeedModal from\"./FeedModal\";import FeedPhotos from\"./FeedPhotos\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Feed=function Feed(_ref){var user=_ref.user;var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),modalPhoto=_React$useState2[0],setModalPhoto=_React$useState2[1];var _React$useState3=React.useState([1]),_React$useState4=_slicedToArray(_React$useState3,2),pages=_React$useState4[0],setPages=_React$useState4[1];var _React$useState5=React.useState(true),_React$useState6=_slicedToArray(_React$useState5,2),infinite=_React$useState6[0],setInfinite=_React$useState6[1];React.useEffect(function(){var wait=false;function infiniteScroll(){if(infinite){var scroll=window.scrollY;var height=document.body.offsetHeight-window.innerHeight;if(scroll>height*0.75&&!wait){setPages(function(pages){return[].concat(_toConsumableArray(pages),[pages.length+1]);});wait=true;setTimeout(function(){wait=false;},500);}}}window.addEventListener(\"wheel\",infiniteScroll);window.addEventListener(\"scroll\",infiniteScroll);return function(){window.removeEventListener(\"wheel\",infiniteScroll);window.removeEventListener(\"scroll\",infiniteScroll);};},[infinite]);return/*#__PURE__*/_jsxs(\"div\",{children:[modalPhoto&&/*#__PURE__*/_jsx(FeedModal,{photo:modalPhoto,setModalPhoto:setModalPhoto}),pages.map(function(page){return/*#__PURE__*/_jsx(FeedPhotos,{page:page,user:user,setModalPhoto:setModalPhoto,setInfinite:setInfinite},page);})]});};Feed.defaultProps={user:0};export default Feed;","map":{"version":3,"names":["React","FeedModal","FeedPhotos","Feed","user","useState","modalPhoto","setModalPhoto","pages","setPages","infinite","setInfinite","useEffect","wait","infiniteScroll","scroll","window","scrollY","height","document","body","offsetHeight","innerHeight","length","setTimeout","addEventListener","removeEventListener","map","page","defaultProps"],"sources":["C:/Users/gabri/Desktop/dogs-project/src/Components/Feed/Feed.js"],"sourcesContent":["import React from \"react\";\r\nimport FeedModal from \"./FeedModal\";\r\nimport FeedPhotos from \"./FeedPhotos\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Feed = ({ user }) => {\r\n  const [modalPhoto, setModalPhoto] = React.useState(null);\r\n  const [pages, setPages] = React.useState([1]);\r\n  const [infinite, setInfinite] = React.useState(true);\r\n\r\n  React.useEffect(() => {\r\n    let wait = false;\r\n    function infiniteScroll() {\r\n      if (infinite) {\r\n        const scroll = window.scrollY;\r\n        const height = document.body.offsetHeight - window.innerHeight;\r\n        if (scroll > height * 0.75 && !wait) {\r\n          setPages((pages) => [...pages, pages.length + 1]);\r\n          wait = true;\r\n          setTimeout(() => {\r\n            wait = false;\r\n          }, 500);\r\n        }\r\n      }\r\n    }\r\n    window.addEventListener(\"wheel\", infiniteScroll);\r\n    window.addEventListener(\"scroll\", infiniteScroll);\r\n    return () => {\r\n      window.removeEventListener(\"wheel\", infiniteScroll);\r\n      window.removeEventListener(\"scroll\", infiniteScroll);\r\n    };\r\n  }, [infinite]);\r\n\r\n  return (\r\n    <div>\r\n      {modalPhoto && (\r\n        <FeedModal photo={modalPhoto} setModalPhoto={setModalPhoto} />\r\n      )}\r\n      {pages.map((page) => (\r\n        <FeedPhotos\r\n          key={page}\r\n          page={page}\r\n          user={user}\r\n          setModalPhoto={setModalPhoto}\r\n          setInfinite={setInfinite}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nFeed.defaultProps = {\r\n  user: 0,\r\n};\r\n\r\nFeed.propTypes = {\r\n  user: PropTypes.oneOfType([\r\n    PropTypes.string.isRequired,\r\n    PropTypes.number.isRequired,\r\n  ]),\r\n};\r\n\r\nexport default Feed;\r\n"],"mappings":"0PAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,UAAP,KAAsB,aAAtB,CACA,MAAOC,WAAP,KAAuB,cAAvB,C,wFAGA,GAAMC,KAAI,CAAG,QAAPA,KAAO,MAAc,IAAXC,KAAW,MAAXA,IAAW,CACzB,oBAAoCJ,KAAK,CAACK,QAAN,CAAe,IAAf,CAApC,oDAAOC,UAAP,qBAAmBC,aAAnB,qBACA,qBAA0BP,KAAK,CAACK,QAAN,CAAe,CAAC,CAAD,CAAf,CAA1B,qDAAOG,KAAP,qBAAcC,QAAd,qBACA,qBAAgCT,KAAK,CAACK,QAAN,CAAe,IAAf,CAAhC,qDAAOK,QAAP,qBAAiBC,WAAjB,qBAEAX,KAAK,CAACY,SAAN,CAAgB,UAAM,CACpB,GAAIC,KAAI,CAAG,KAAX,CACA,QAASC,eAAT,EAA0B,CACxB,GAAIJ,QAAJ,CAAc,CACZ,GAAMK,OAAM,CAAGC,MAAM,CAACC,OAAtB,CACA,GAAMC,OAAM,CAAGC,QAAQ,CAACC,IAAT,CAAcC,YAAd,CAA6BL,MAAM,CAACM,WAAnD,CACA,GAAIP,MAAM,CAAGG,MAAM,CAAG,IAAlB,EAA0B,CAACL,IAA/B,CAAqC,CACnCJ,QAAQ,CAAC,SAACD,KAAD,qCAAeA,KAAf,GAAsBA,KAAK,CAACe,MAAN,CAAe,CAArC,IAAD,CAAR,CACAV,IAAI,CAAG,IAAP,CACAW,UAAU,CAAC,UAAM,CACfX,IAAI,CAAG,KAAP,CACD,CAFS,CAEP,GAFO,CAAV,CAGD,CACF,CACF,CACDG,MAAM,CAACS,gBAAP,CAAwB,OAAxB,CAAiCX,cAAjC,EACAE,MAAM,CAACS,gBAAP,CAAwB,QAAxB,CAAkCX,cAAlC,EACA,MAAO,WAAM,CACXE,MAAM,CAACU,mBAAP,CAA2B,OAA3B,CAAoCZ,cAApC,EACAE,MAAM,CAACU,mBAAP,CAA2B,QAA3B,CAAqCZ,cAArC,EACD,CAHD,CAID,CArBD,CAqBG,CAACJ,QAAD,CArBH,EAuBA,mBACE,uBACGJ,UAAU,eACT,KAAC,SAAD,EAAW,KAAK,CAAEA,UAAlB,CAA8B,aAAa,CAAEC,aAA7C,EAFJ,CAIGC,KAAK,CAACmB,GAAN,CAAU,SAACC,IAAD,qBACT,KAAC,UAAD,EAEE,IAAI,CAAEA,IAFR,CAGE,IAAI,CAAExB,IAHR,CAIE,aAAa,CAAEG,aAJjB,CAKE,WAAW,CAAEI,WALf,EACOiB,IADP,CADS,EAAV,CAJH,GADF,CAgBD,CA5CD,CA8CAzB,IAAI,CAAC0B,YAAL,CAAoB,CAClBzB,IAAI,CAAE,CADY,CAApB,CAWA,cAAeD,KAAf"},"metadata":{},"sourceType":"module"}